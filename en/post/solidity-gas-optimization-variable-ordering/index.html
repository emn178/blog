<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="content-language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Solidity Gas Optimizations - Variable Ordering | emn178's Blog</title><meta name="keywords" content="Blockchain,Solidity,Gas,Optimization,Variable"><meta name="author" content="emn178"><meta name="copyright" content="emn178"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="This article explains the gas optimization techniques of Solidity smart contracts, explains how variable ordering affect gas consumption, and provides"><meta property="og:type" content="article"><meta property="og:title" content="Solidity Gas Optimizations - Variable Ordering"><meta property="og:url" content="https://blog.emn178.cc/en/post/solidity-gas-optimization-variable-ordering/"><meta property="og:site_name" content="emn178&#39;s Blog"><meta property="og:description" content="This article explains the gas optimization techniques of Solidity smart contracts, explains how variable ordering affect gas consumption, and provides"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://blog.emn178.cc/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg"><meta property="article:published_time" content="2018-09-11T02:26:38.000Z"><meta property="article:modified_time" content="2023-10-08T06:44:18.768Z"><meta property="article:author" content="emn178"><meta property="article:tag" content="Solidity"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://blog.emn178.cc/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg"><link rel="shortcut icon" href="/favicon.png"><link rel="canonical" href="https://blog.emn178.cc/en/post/solidity-gas-optimization-variable-ordering/"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=26"><link rel="preload" href="/libs/fontawesome-free-6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel=&quot;stylesheet&quot;"><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:void 0,translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"Copy successfully",error:"Copy error",noSupport:"The browser does not support"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"Just",min:"minutes ago",hour:"hours ago",day:"days ago",month:"months ago"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,percent:{toc:!0,rightside:!1}},delayScripts=[],delayStyles=[],maybeMobile=window.innerWidth<=800;if(delayScripts.push({delay:maybeMobile?1e3:0,src:"/js/lazyload.iife.min.js",onload:()=>initLazyLoad()}),delayScripts.push({delay:maybeMobile?2e3:1e3,src:"/js/fancybox.umd.min.js",onload:()=>runLightbox()}),delayStyles.push({delay:maybeMobile?2e3:1e3,href:"/css/fancybox.min.css"}),delayScripts.push({delay:3e3,src:"/libs/share-js/js/social-share.min.js"}),delayStyles.push({delay:3e3,href:"/libs/share-js/css/share.min.css"}),"localhost:4000"!==location.host){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MPNMQM2EN1"),gtag({event:"gtm.js","gtm.start":(new Date).getTime(),"gtm.uniqueEventId":0})}function initGTMOnEvent(e){document.removeEventListener(event.type,initGTMOnEvent),initGTM()}function initGTM(){if(window.gtmDidInit)return;window.gtmDidInit=!0;const e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=/G-MPNMQM2EN1",document.head.appendChild(e)}document.addEventListener("DOMContentLoaded",()=>{setTimeout(initGTM,3500)}),document.addEventListener("scroll",initGTMOnEvent),document.addEventListener("mousemove",initGTMOnEvent),document.addEventListener("touchstart",initGTMOnEvent),delayScripts.push({delay:0,src:"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"})</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Solidity Gas Optimizations - Variable Ordering",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-10-08 14:44:18"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.getCSS=(e,t=!1)=>new Promise((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onerror=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,o())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="alternate" href="/en/atom.xml" title="小殘的程式光廊" type="application/atom+xml">
<link rel="alternate" href="/en/rss2.xml" title="小殘的程式光廊" type="application/rss+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/loading.svg" data-src="/images/avatar.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"><noscript><img src="/images/avatar.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></noscript></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">203</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">15</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/en/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/en/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/en/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/en/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-rss"></i><span> Subscriptions</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/en/atom.xml"><i class="fa-fw fas fa-rss"></i><span> ATOM</span></a></li><li><a class="site-page child" href="/en/rss2.xml"><i class="fa-fw fas fa-rss"></i><span> RSS</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/zh-TW/"><i class="fa-fw fas fa-globe"></i><span> 中文</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity.png)"><nav id="nav"><span id="blog-info"><a href="/en/" title="emn178's Blog"><span class="site-name">emn178's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/en/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/en/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/en/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/en/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-rss"></i><span> Subscriptions</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/en/atom.xml"><i class="fa-fw fas fa-rss"></i><span> ATOM</span></a></li><li><a class="site-page child" href="/en/rss2.xml"><i class="fa-fw fas fa-rss"></i><span> RSS</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/zh-TW/"><i class="fa-fw fas fa-globe"></i><span> 中文</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Solidity Gas Optimizations - Variable Ordering</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fas fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2018-09-11T02:26:38.000Z" title="Created 2018-09-11 10:26:38">2018-09-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-10-08T06:44:18.768Z" title="Updated 2023-10-08 14:44:18">2023-10-08</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/en/categories/Blockchain/">Blockchain</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="Solidity Gas Optimizations - Variable Ordering"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h1><p>You may not know that the order of declaration of variables will also affect the consumption of Gas.<br>Since the EVM operations are all performed in units of 32 bytes, the compiler will attempt to package the variables into a 32 bytes set for access, so as to reduce access times.<br>However, the compiler is not smart enough to automatically optimize the grouping of variables. It will group the statically-sized variables in groups of 32 bytes. For example:</p><figure class="highlight solidity"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">contract</span> <span class="title">MyContract</span> </span>&#123;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> a;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> b;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> c;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> d;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    a <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    b <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    c <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    d <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>When you execute <code>test()</code>, it looks like you have stored four variables. Since the sum of these four variables is exactly 32 bytes, one SSTORE is actually executed. This only costs 20,000 Gas. Let’s see next case:</p><figure class="highlight solidity"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">contract</span> <span class="title">MyContract</span> </span>&#123;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> a;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> b;</span><br><span class="line">  <span class="keyword">byte</span> e;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> c;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> d;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    a <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    b <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    c <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    d <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Another variable is inserted in the middle, which causes <code>a</code>, <code>b</code>, <code>e</code> and <code>c</code> to be grouped together, and <code>d</code> will be grouped independently. The same <code>test()</code> causes two writes and costs 40,000 Gas. Let’s see the other case:</p><figure class="highlight solidity"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">contract</span> <span class="title">MyContract</span> </span>&#123;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> a;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> b;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> c;</span><br><span class="line">  <span class="keyword">uint64</span> <span class="keyword">public</span> d;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    a <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    b <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// ... do something</span></span><br><span class="line">    c <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    d <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The difference between this and the first example is that after a and b in <code>test()</code> are stored, something else is done, and finally c and d are stored. The result will cause two writes this time. Because when the <code>do something</code> is executed, the compiler determines that the packed action has ended, and then sends the write. However, since the second write is the same set of data, it is considered to be modified. A total of 25,000 gas will be consumed.</p><h2 id="Optimization-Strategy"><a href="#Optimization-Strategy" class="headerlink" title="Optimization Strategy"></a>Optimization Strategy</h2><p>According to the above principle, we can easily know how to deal with it.</p><h3 id="Correct-sorting-and-grouping"><a href="#Correct-sorting-and-grouping" class="headerlink" title="Correct sorting and grouping"></a>Correct sorting and grouping</h3><p>Group the data size by 32 bytes, and put together variables that are often updated at the same time.</p><p>Bad</p><figure class="highlight solidity"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">contract</span> <span class="title">MyContract</span> </span>&#123;</span><br><span class="line">  <span class="keyword">uint128</span> <span class="keyword">public</span> hp;</span><br><span class="line">  <span class="keyword">uint128</span> <span class="keyword">public</span> maxHp;</span><br><span class="line">  <span class="keyword">uint32</span> level;</span><br><span class="line">  <span class="keyword">uint128</span> <span class="keyword">public</span> mp;</span><br><span class="line">  <span class="keyword">uint128</span> <span class="keyword">public</span> maxMp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Good</p><figure class="highlight solidity"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">contract</span> <span class="title">MyContract</span> </span>&#123;</span><br><span class="line">  <span class="keyword">uint128</span> <span class="keyword">public</span> hp;</span><br><span class="line">  <span class="keyword">uint128</span> <span class="keyword">public</span> mp;</span><br><span class="line">  <span class="keyword">uint128</span> <span class="keyword">public</span> maxHp;</span><br><span class="line">  <span class="keyword">uint128</span> <span class="keyword">public</span> maxMp;</span><br><span class="line">  <span class="keyword">uint32</span> level;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Here we assume that <code>hp</code> and <code>mp</code> are updated together more often, and <code>maxHp</code> and <code>maxMp</code> are updated together more often.</p><h3 id="Access-once"><a href="#Access-once" class="headerlink" title="Access once"></a>Access once</h3><p>As in the example above, try to access it once.</p><p>Bad</p><figure class="highlight solidity"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  hp <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// ... do something</span></span><br><span class="line">  mp <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Good</p><figure class="highlight solidity"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ... do something</span></span><br><span class="line">  hp <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">  mp <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>This rule is the same on <code>struct</code>.</p><h2 id="Further-Reading"><a href="#Further-Reading" class="headerlink" title="Further Reading"></a>Further Reading</h2><p>Previoous Post: <a href="../solidity-gas-optimization-data-compression/">Solidity Gas Optimizations - Data Compression</a></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://blog.emn178.cc">小殘</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://blog.emn178.cc/en/post/solidity-gas-optimization-variable-ordering/">https://blog.emn178.cc/en/post/solidity-gas-optimization-variable-ordering/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/en/tags/Solidity/">Solidity</a></div><div class="post_share"><div class="social-share" data-image="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" data-initialized="true"><a class="social-share-icon icon-facebook" href="#" aria-label="share to facebook"></a><a class="social-share-icon icon-twitter" href="#" aria-label="share to twitter"></a><a class="social-share-icon icon-wechat" href="#" aria-label="share to wechat"></a><a class="social-share-icon icon-weibo" href="#" aria-label="share to weibo"></a><a class="social-share-icon icon-qq" href="#" aria-label="share to qq"></a></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/en/post/solidity-gas-optimization-data-compression/" title="Solidity Gas Optimizations - Data Compression"><img class="cover" src="/images/loading.svg" data-src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><noscript><img class="cover" src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"></noscript><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Solidity Gas Optimizations - Data Compression</div></div></a></div><div class="next-post pull-right"><a href="/en/post/zksync-airdrop-strategy/" title="zkSync Airdrop Guide"><img class="cover" src="/images/loading.svg" data-src="/images/zh-TW/post/2023/zksync-airdrop-strategy/zkSync_logo.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><noscript><img class="cover" src="/images/zh-TW/post/2023/zksync-airdrop-strategy/zkSync_logo.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"></noscript><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">zkSync Airdrop Guide</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/en/post/solidity-gas-optimization/" title="Solidity Gas Optimizations"><img class="cover" src="/images/loading.svg" data-src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"><noscript><img class="cover" src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"></noscript><div class="content is-center"><div class="date"><i class="fas fa-calendar-alt fa-fw"></i> 2018-03-07</div><div class="title">Solidity Gas Optimizations</div></div></a></div><div><a href="/en/post/solidity-gas-optimization-function-name/" title="Solidity Gas Optimizations - Function Name"><img class="cover" src="/images/loading.svg" data-src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"><noscript><img class="cover" src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"></noscript><div class="content is-center"><div class="date"><i class="fas fa-calendar-alt fa-fw"></i> 2018-05-04</div><div class="title">Solidity Gas Optimizations - Function Name</div></div></a></div><div><a href="/en/post/solidity-gas-optimization-data-compression/" title="Solidity Gas Optimizations - Data Compression"><img class="cover" src="/images/loading.svg" data-src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"><noscript><img class="cover" src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"></noscript><div class="content is-center"><div class="date"><i class="fas fa-calendar-alt fa-fw"></i> 2018-05-07</div><div class="title">Solidity Gas Optimizations - Data Compression</div></div></a></div><div><a href="/en/post/solidity-custom-error/" title="Solidity - Custom Error"><img class="cover" src="/images/loading.svg" data-src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"><noscript><img class="cover" src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"></noscript><div class="content is-center"><div class="date"><i class="fas fa-calendar-alt fa-fw"></i> 2023-06-18</div><div class="title">Solidity - Custom Error</div></div></a></div><div><a href="/en/post/solidity-ecrecover/" title="Solidity - ecrecover"><img class="cover" src="/images/loading.svg" data-src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"><noscript><img class="cover" src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"></noscript><div class="content is-center"><div class="date"><i class="fas fa-calendar-alt fa-fw"></i> 2023-10-08</div><div class="title">Solidity - ecrecover</div></div></a></div><div><a href="/en/post/solidity-signature-malleability/" title="Solidity - Signature Malleability"><img class="cover" src="/images/loading.svg" data-src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"><noscript><img class="cover" src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" alt="cover"></noscript><div class="content is-center"><div class="date"><i class="fas fa-calendar-alt fa-fw"></i> 2023-10-09</div><div class="title">Solidity - Signature Malleability</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 評論</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/loading.svg" data-src="/images/avatar.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><noscript><img src="/images/avatar.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></noscript></div><div class="author-info__name">emn178</div><div class="author-info__description">A blog sharing experiences about programming and technology.</div></div><div class="card-info-data site-data is-center"><a href="/en/archives/"><div class="headline">Articles</div><div class="length-num">29</div></a><a href="/en/tags/"><div class="headline">Tags</div><div class="length-num">5</div></a><a href="/en/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Description"><span class="toc-number">1.</span> <span class="toc-text">Description</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Optimization-Strategy"><span class="toc-number">1.1.</span> <span class="toc-text">Optimization Strategy</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Correct-sorting-and-grouping"><span class="toc-number">1.1.1.</span> <span class="toc-text">Correct sorting and grouping</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Access-once"><span class="toc-number">1.1.2.</span> <span class="toc-text">Access once</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Further-Reading"><span class="toc-number">1.2.</span> <span class="toc-text">Further Reading</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/en/post/using-ethers-js-to-sign-eip-712-typed-structured-data/" title="Using Ethers.js to Sign and Recover EIP-712 Typed Structured Data"><img src="/images/loading.svg" data-src="/images/zh-TW/post/2023/ethers-js-parse-custom-error/ethers.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Using Ethers.js to Sign and Recover EIP-712 Typed Structured Data"><noscript><img src="/images/zh-TW/post/2023/ethers-js-parse-custom-error/ethers.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Using Ethers.js to Sign and Recover EIP-712 Typed Structured Data"></noscript></a><div class="content"><a class="title" href="/en/post/using-ethers-js-to-sign-eip-712-typed-structured-data/" title="Using Ethers.js to Sign and Recover EIP-712 Typed Structured Data">Using Ethers.js to Sign and Recover EIP-712 Typed Structured Data</a><time datetime="2023-10-14T02:17:23.000Z" title="Created 2023-10-14 10:17:23">2023-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/en/post/using-web3-js-to-sign-and-recover-eip-712-typed-structured-data/" title="Using Web3.js to Sign and Recover EIP-712 Typed Structured Data"><img src="/images/loading.svg" data-src="/images/zh-TW/post/2023/using-web3-js-to-parse-custom-error/web3js.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Using Web3.js to Sign and Recover EIP-712 Typed Structured Data"><noscript><img src="/images/zh-TW/post/2023/using-web3-js-to-parse-custom-error/web3js.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Using Web3.js to Sign and Recover EIP-712 Typed Structured Data"></noscript></a><div class="content"><a class="title" href="/en/post/using-web3-js-to-sign-and-recover-eip-712-typed-structured-data/" title="Using Web3.js to Sign and Recover EIP-712 Typed Structured Data">Using Web3.js to Sign and Recover EIP-712 Typed Structured Data</a><time datetime="2023-10-13T11:50:47.000Z" title="Created 2023-10-13 19:50:47">2023-10-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/en/post/solidity-eip-712-typed-structured-data-hashing-and-signing/" title="Solidity - EIP-712 Typed Structured Data Hashing and Signing"><img src="/images/loading.svg" data-src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Solidity - EIP-712 Typed Structured Data Hashing and Signing"><noscript><img src="/images/zh-TW/post/2018/solidity-gas-optimization-variable-ordering/solidity-logo.svg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Solidity - EIP-712 Typed Structured Data Hashing and Signing"></noscript></a><div class="content"><a class="title" href="/en/post/solidity-eip-712-typed-structured-data-hashing-and-signing/" title="Solidity - EIP-712 Typed Structured Data Hashing and Signing">Solidity - EIP-712 Typed Structured Data Hashing and Signing</a><time datetime="2023-10-12T12:39:22.000Z" title="Created 2023-10-12 20:39:22">2023-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/en/post/using-ethers-js-to-sign-and-recover/" title="Using Ethers.js to Sign and Recover"><img src="/images/loading.svg" data-src="/images/zh-TW/post/2023/ethers-js-parse-custom-error/ethers.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Using Ethers.js to Sign and Recover"><noscript><img src="/images/zh-TW/post/2023/ethers-js-parse-custom-error/ethers.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Using Ethers.js to Sign and Recover"></noscript></a><div class="content"><a class="title" href="/en/post/using-ethers-js-to-sign-and-recover/" title="Using Ethers.js to Sign and Recover">Using Ethers.js to Sign and Recover</a><time datetime="2023-10-11T11:59:57.000Z" title="Created 2023-10-11 19:59:57">2023-10-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/en/post/using-web3-js-to-sign-and-recover/" title="Using Web3.js to Sign and Recover"><img src="/images/loading.svg" data-src="/images/zh-TW/post/2023/using-web3-js-to-parse-custom-error/web3js.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Using Web3.js to Sign and Recover"><noscript><img src="/images/zh-TW/post/2023/using-web3-js-to-parse-custom-error/web3js.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Using Web3.js to Sign and Recover"></noscript></a><div class="content"><a class="title" href="/en/post/using-web3-js-to-sign-and-recover/" title="Using Web3.js to Sign and Recover">Using Web3.js to Sign and Recover</a><time datetime="2023-10-10T01:03:27.000Z" title="Created 2023-10-10 09:03:27">2023-10-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2010 - 2023 By emn178</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4"></script><script src="/js/main.js?v=14"></script><div class="js-pjax"><script>function loadDisqus(){var e,t,i=function(){this.page.url="https://blog.emn178.cc/en/post/solidity-gas-optimization-variable-ordering/",this.page.identifier="/en/post/solidity-gas-optimization-variable-ordering/",this.page.title="Solidity Gas Optimizations - Variable Ordering"};window.disqusReset=()=>{DISQUS.reset({reload:!0,config:i})},window.DISQUS?disqusReset():(e=document,(t=e.createElement("script")).src="https://emn178.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)),document.getElementById("darkmode").addEventListener("click",()=>{setTimeout(()=>window.disqusReset(),200)})}{function loadOtherComment(){loadDisqus()}btf.loadComment(document.getElementById("disqus_thread"),loadDisqus)}</script></div></div></body></html>