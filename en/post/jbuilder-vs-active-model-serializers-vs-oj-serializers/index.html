<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="content-language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>jbuilder vs active_model_serializers vs oj_serializers - Rails JSON API Comparison | emn178's Blog</title><meta name="keywords" content="Programming,Ruby,Ruby on Rails,JSON,Performance,Benchmark"><meta name="author" content="emn178"><meta name="copyright" content="emn178"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Rails provides a built-in as_json method for generating JSON. Additionally, jbuilder is the default gem for handling JSON APIs, and there are other al"><meta property="og:type" content="article"><meta property="og:title" content="jbuilder vs active_model_serializers vs oj_serializers - Rails JSON API Comparison"><meta property="og:url" content="https://emn178.github.io/blog/en/post/jbuilder-vs-active-model-serializers-vs-oj-serializers/"><meta property="og:site_name" content="emn178&#39;s Blog"><meta property="og:description" content="Rails provides a built-in as_json method for generating JSON. Additionally, jbuilder is the default gem for handling JSON APIs, and there are other al"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://emn178.github.io/blog/images/logos/Ruby_On_Rails_Logo.svg"><meta property="article:published_time" content="2025-03-23T02:03:34.000Z"><meta property="article:modified_time" content="2025-04-20T10:03:45.424Z"><meta property="article:author" content="emn178"><meta property="article:tag" content="AI,Coding,Programming,Technology"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://emn178.github.io/blog/images/logos/Ruby_On_Rails_Logo.svg"><link rel="shortcut icon" href="/blog/favicon.png"><link rel="canonical" href="https://emn178.github.io/blog/en/post/jbuilder-vs-active-model-serializers-vs-oj-serializers/"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/blog/css/index.css?v=26"><link rel="preload" href="/blog/libs/fontawesome-free-6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel=&quot;stylesheet&quot;"><script>const GLOBAL_CONFIG={root:"/blog/",algolia:void 0,localSearch:void 0,translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"Copy successfully",error:"Copy error",noSupport:"The browser does not support"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"Just",min:"minutes ago",hour:"hours ago",day:"days ago",month:"months ago"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,percent:{toc:!0,rightside:!1}},delayScripts=[],delayStyles=[],maybeMobile=window.innerWidth<=800;if(delayScripts.push({delay:maybeMobile?1e3:0,src:"/blog/js/lazyload.iife.min.js",onload:()=>initLazyLoad()}),delayScripts.push({delay:maybeMobile?2e3:1e3,src:"/blog/js/fancybox.umd.min.js",onload:()=>runLightbox()}),delayStyles.push({delay:maybeMobile?2e3:1e3,href:"/blog/css/fancybox.min.css"}),delayScripts.push({delay:3e3,src:"/blog/libs/share-js/js/social-share.min.js"}),delayStyles.push({delay:3e3,href:"/blog/libs/share-js/css/share.min.css"}),"localhost:4000"!==location.host){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-P1KZGBXDLG"),gtag({event:"gtm.js","gtm.start":(new Date).getTime(),"gtm.uniqueEventId":0})}function initGTMOnEvent(e){document.removeEventListener(event.type,initGTMOnEvent),initGTM()}function initGTM(){if(window.gtmDidInit)return;window.gtmDidInit=!0;const e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=/blog/G-P1KZGBXDLG",document.head.appendChild(e)}document.addEventListener("DOMContentLoaded",()=>{setTimeout(initGTM,3500)}),document.addEventListener("scroll",initGTMOnEvent),document.addEventListener("mousemove",initGTMOnEvent),document.addEventListener("touchstart",initGTMOnEvent),delayScripts.push({delay:0,src:"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"})</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"jbuilder vs active_model_serializers vs oj_serializers - Rails JSON API Comparison",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-04-20 18:03:45"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><link rel="alternate" href="https://emn178.github.io/blog/zh-TW/post/jbuilder-vs-active-model-serializers-vs-oj-serializers/" hreflang="zh-TW" type="text/html"><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)}),e.getCSS=(e,t=!1)=>new Promise((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onerror=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,o())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="alternate" href="/en/blog/atom.xml" title="小殘的程式光廊" type="application/atom+xml">
<link rel="alternate" href="/en/blog/rss2.xml" title="小殘的程式光廊" type="application/rss+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/blog/images/loading.svg" data-src="/blog/images/avatar.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"><noscript><img src="/blog/images/avatar.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></noscript></div><div class="sidebar-site-data site-data is-center"><a href="/blog/archives/"><div class="headline">Articles</div><div class="length-num">6</div></a><a href="/blog/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/blog/categories/"><div class="headline">Categories</div><div class="length-num">4</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/en/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/blog/en/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/blog/en/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/blog/en/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-rss"></i><span> Subscriptions</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/blog/en/atom.xml"><i class="fa-fw fas fa-rss"></i><span> ATOM</span></a></li><li><a class="site-page child" href="/blog/en/rss2.xml"><i class="fa-fw fas fa-rss"></i><span> RSS</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/blog/zh-TW/"><i class="fa-fw fas fa-globe"></i><span> 中文</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/blog/images/logos/Ruby_On_Rails_Logo.svg)"><nav id="nav"><span id="blog-info"><a href="/blog/en/" title="emn178's Blog"><span class="site-name">emn178's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/en/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/blog/en/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/blog/en/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/blog/en/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-rss"></i><span> Subscriptions</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/blog/en/atom.xml"><i class="fa-fw fas fa-rss"></i><span> ATOM</span></a></li><li><a class="site-page child" href="/blog/en/rss2.xml"><i class="fa-fw fas fa-rss"></i><span> RSS</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/blog/zh-TW/"><i class="fa-fw fas fa-globe"></i><span> 中文</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">jbuilder vs active_model_serializers vs oj_serializers - Rails JSON API Comparison</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fas fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-03-23T02:03:34.000Z" title="Created 2025-03-23 10:03:34">2025-03-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-04-20T10:03:45.424Z" title="Updated 2025-04-20 18:03:45">2025-04-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/blog/en/categories/Programming/">Programming</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/blog/en/categories/Programming/Ruby/">Ruby</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="jbuilder vs active_model_serializers vs oj_serializers - Rails JSON API Comparison"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>Rails provides a built-in <code>as_json</code> method for generating JSON. Additionally, jbuilder is the default gem for handling JSON APIs, and there are other alternative gems available. This article compares the following solutions:</p><ol><li>as_json</li><li><a target="_blank" rel="noopener" href="https://github.com/rails/jbuilder">jbuilder</a></li><li><a target="_blank" rel="noopener" href="https://github.com/rails-api/active_model_serializers">active_model_serializers</a></li><li><a target="_blank" rel="noopener" href="https://github.com/ElMassimo/oj_serializers">oj_serializers</a></li></ol><p>Based on personal experience, the evaluation considers the following criteria:</p><ol><li>Ease of maintenance.</li><li>Reusability of defined structures.</li><li>Ability to generate JSON objects and use them within the code.</li><li>Performance.</li><li>Ease of testing.</li></ol><h2 id="Scenario"><a href="#Scenario" class="headerlink" title="Scenario"></a>Scenario</h2><p>Assume we have two models: <code>Post</code> and <code>User</code>. The goal is to generate the following JSON outputs:</p><p>Post index</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;posts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Post Title&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;timeago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;19 minutes&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;User Name&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Post show</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;posts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Post Title&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;timeago&quot;</span><span class="punctuation">:</span> <span class="string">&quot;19 minutes&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Post Content...&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;user&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;User Name&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>User index</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;users&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;User Name&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>This scenario simulates displaying partial data on an index page and showing complete data with nested structures on a detailed page.</p><h2 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h2><p>The following sections demonstrate how to implement the example using four different approaches.</p><h3 id="as-json"><a href="#as-json" class="headerlink" title="as_json"></a>as_json</h3><p>post.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Post</span> &lt; <span class="title class_ inherited__">ApplicationRecord</span></span><br><span class="line">  <span class="comment"># for time_ago_in_words</span></span><br><span class="line">  <span class="keyword">include</span> <span class="title class_">ActionView::Helpers::DateHelper</span></span><br><span class="line"></span><br><span class="line">  belongs_to <span class="symbol">:user</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">timeago</span></span><br><span class="line">    time_ago_in_words(created_at)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>posts_controller.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostsController</span> &lt; <span class="title class_ inherited__">ApplicationController</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">index</span></span><br><span class="line">    render <span class="symbol">json:</span> &#123;</span><br><span class="line">      <span class="symbol">posts:</span> <span class="title class_">Post</span>.all.as_json(</span><br><span class="line">        <span class="symbol">only:</span> %i[id title],</span><br><span class="line">        <span class="symbol">methods:</span> %i[timeago],</span><br><span class="line">        <span class="symbol">include:</span> &#123;</span><br><span class="line">          <span class="symbol">user:</span> &#123;</span><br><span class="line">            <span class="symbol">only:</span> %i[id name]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">show</span></span><br><span class="line">    render <span class="symbol">json:</span> &#123;</span><br><span class="line">      <span class="symbol">posts:</span> <span class="title class_">Post</span>.find(params[<span class="symbol">:id</span>]).as_json(</span><br><span class="line">        <span class="symbol">only:</span> %i[id title content],</span><br><span class="line">        <span class="symbol">methods:</span> %i[timeago],</span><br><span class="line">        <span class="symbol">include:</span> &#123;</span><br><span class="line">          <span class="symbol">user:</span> &#123;</span><br><span class="line">            <span class="symbol">only:</span> %i[id name]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>users_controller.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UsersController</span> &lt; <span class="title class_ inherited__">ApplicationController</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">index</span></span><br><span class="line">    render <span class="symbol">json:</span> &#123;</span><br><span class="line">      <span class="symbol">users:</span> <span class="title class_">User</span>.all.as_json(</span><br><span class="line">        <span class="symbol">only:</span> %i[id title]</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>Using the built-in <code>as_json</code> function allows simple conversion of model data into JSON. However, it’s not easy to handle fields that need processing. In the example above, you can see that timeago needs to be implemented in the model. Additionally, reusing structures requires custom design; otherwise, it will result in a lot of redundant code, as seen in the example.</p><h3 id="jbuilder"><a href="#jbuilder" class="headerlink" title="jbuilder"></a>jbuilder</h3><p>users&#x2F;_user.json.jbuilder</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json.extract! user, *%i[id name]</span><br></pre></td></tr></table></figure><p>users&#x2F;index.json.jbuilder</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">json.users <span class="keyword">do</span></span><br><span class="line">  json.array! users, <span class="symbol">partial:</span> <span class="string">&#x27;user&#x27;</span>, <span class="symbol">as:</span> <span class="symbol">:user</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>posts&#x2F;_post.json.jbuilder</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">json.extract! post, *%i[id title]</span><br><span class="line">json.extract! post, *%i[content] <span class="keyword">if</span> local_assigns[<span class="symbol">:detail</span>]</span><br><span class="line">json.timeago time_ago_in_words(post.created_at)</span><br><span class="line"></span><br><span class="line">json.user post.user, <span class="symbol">partial:</span> <span class="string">&#x27;users/user&#x27;</span>, <span class="symbol">as:</span> <span class="symbol">:user</span></span><br></pre></td></tr></table></figure><p>posts&#x2F;index.json.jbuilder</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">json.posts <span class="keyword">do</span></span><br><span class="line">  json.array! posts, <span class="symbol">partial:</span> <span class="string">&#x27;post&#x27;</span>, <span class="symbol">as:</span> <span class="symbol">:post</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>posts&#x2F;show.json.jbuilder</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">json.post <span class="keyword">do</span></span><br><span class="line">  json.partial! post, <span class="symbol">as:</span> <span class="symbol">:post</span>, <span class="symbol">detail:</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>posts_controller.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostsController</span> &lt; <span class="title class_ inherited__">ApplicationController</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">index</span></span><br><span class="line">    render <span class="symbol">locals:</span> &#123; <span class="symbol">posts:</span> <span class="title class_">Post</span>.all &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">show</span></span><br><span class="line">    render <span class="symbol">locals:</span> &#123; <span class="symbol">post:</span> <span class="title class_">Post</span>.find(params[<span class="symbol">:id</span>]) &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>users_controller.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UsersController</span> &lt; <span class="title class_ inherited__">ApplicationController</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">index</span></span><br><span class="line">    render <span class="symbol">locals:</span> &#123; <span class="symbol">users:</span> <span class="title class_">User</span>.all &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>jbuilder uses a view-rendering approach for generating JSON, moving JSON construction logic into views. Partial templates allow structure reuse. However, passing parameters is necessary to control different outputs, as seen in the Post show example.</p><p>Since JSON is generated using Render View, producing JSON outside of an API becomes more complicated. Additionally, testing must be conducted through a controller, and code within the view is excluded from code coverage.</p><p>If you want to generate JSON using the existing view in your code, you can write it like this:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ActionController::Base</span>.new.render_to_string(</span><br><span class="line">  <span class="symbol">partial:</span> <span class="string">&#x27;posts/post&#x27;</span>,</span><br><span class="line">  <span class="symbol">locals:</span> &#123; <span class="symbol">post:</span> post, <span class="symbol">detail:</span> <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>This generates a JSON string. If you need an object for further operations, you must first use <code>JSON.parse</code>.</p><h3 id="active-model-serializers"><a href="#active-model-serializers" class="headerlink" title="active_model_serializers"></a>active_model_serializers</h3><p>user_serializer.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserSerializer</span> &lt; <span class="title class_ inherited__">ActiveModel::Serializer</span></span><br><span class="line">  attributes <span class="symbol">:id</span>, <span class="symbol">:name</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>post_serializer.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostSerializer</span> &lt; <span class="title class_ inherited__">ActiveModel::Serializer</span></span><br><span class="line">  <span class="keyword">include</span> <span class="title class_">ActionView::Helpers::DateHelper</span></span><br><span class="line"></span><br><span class="line">  attributes <span class="symbol">:id</span>, <span class="symbol">:title</span></span><br><span class="line">  attribute <span class="symbol">:timeago</span> <span class="keyword">do</span></span><br><span class="line">    time_ago_in_words(object.created_at)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  has_one <span class="symbol">:user</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>post_detail_serializer.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostDetailSerializer</span> &lt; <span class="title class_ inherited__">PostSerializer</span></span><br><span class="line">  attributes <span class="symbol">:content</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>posts_controller.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostsController</span> &lt; <span class="title class_ inherited__">ApplicationController</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">index</span></span><br><span class="line">    render <span class="symbol">json:</span> <span class="title class_">Post</span>.all</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">show</span></span><br><span class="line">    render <span class="symbol">json:</span> <span class="title class_">Post</span>.find(params[<span class="symbol">:id</span>]), <span class="symbol">serializer:</span> <span class="title class_">PostDetailSerializer</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>users_controller.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UsersController</span> &lt; <span class="title class_ inherited__">ApplicationController</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">index</span></span><br><span class="line">    render <span class="symbol">json:</span> <span class="title class_">User</span>.all</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>active_model_serializers uses the defined Serializer class to output data. Reusable parts can also be output in detail by using inheritance. Like the <code>PostDetailSerializer</code> above.</p><p>If you want to generate JSON in the code, you can write it like this:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ActiveModelSerializers::SerializableResource</span>.new(post, &#123;</span><br><span class="line">  <span class="symbol">serializer:</span> <span class="title class_">PostDetailSerializer</span></span><br><span class="line">&#125;).as_json</span><br></pre></td></tr></table></figure><p>However, there are actually quite a few issues with its usage:</p><h4 id="nil-requires-special-handling"><a href="#nil-requires-special-handling" class="headerlink" title="nil requires special handling"></a>nil requires special handling</h4><p>When retrieving a single record, if the expectation is to return <code>null</code> instead of a 404, an error occurs. For example, in the following case:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">render <span class="symbol">json:</span> post, <span class="symbol">serializer:</span> <span class="title class_">PostDetailSerializer</span></span><br></pre></td></tr></table></figure><p>When <code>post</code> is <code>nil</code>, the expectation is to output:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;post&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Actually, an error occurs.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">undefined method `read_attribute_for_serialization&#x27; for nil</span><br></pre></td></tr></table></figure><p>It turns out it needs to be written like this:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> post</span><br><span class="line">  render <span class="symbol">json:</span> post, <span class="symbol">serializer:</span> <span class="title class_">PostDetailSerializer</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  render <span class="symbol">json:</span> &#123; <span class="symbol">post:</span> <span class="literal">nil</span> &#125;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h4 id="Default-single-root"><a href="#Default-single-root" class="headerlink" title="Default single root"></a>Default single root</h4><p>The default behavior automatically generates a root like posts or post, for example:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;posts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span> ... <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>To output additional data, for example:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;posts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span> ... <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;total_pages&quot;</span><span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>The default behavior can’t achieve this. You can either use the JSON generation method mentioned above or use the <code>meta</code> parameter.</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">render <span class="symbol">json:</span> <span class="title class_">Post</span>.all, <span class="symbol">meta:</span> &#123; <span class="symbol">total_pages:</span> <span class="number">10</span> &#125;</span><br></pre></td></tr></table></figure><p>However, this will add an extra level of nesting.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;posts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span> ... <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;meta&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;total_pages&quot;</span><span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="oj-serializers"><a href="#oj-serializers" class="headerlink" title="oj_serializers"></a>oj_serializers</h3><p>user_serializer.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserSerializer</span> &lt; <span class="title class_ inherited__">Oj::Serializer</span></span><br><span class="line">  attributes <span class="symbol">:id</span>, <span class="symbol">:name</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>post_serializer.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostSerializer</span> &lt; <span class="title class_ inherited__">Oj::Serializer</span></span><br><span class="line">  <span class="keyword">include</span> <span class="title class_">ActionView::Helpers::DateHelper</span></span><br><span class="line"></span><br><span class="line">  attributes <span class="symbol">:id</span>, <span class="symbol">:title</span></span><br><span class="line">  attribute <span class="symbol">:timeago</span> <span class="keyword">do</span></span><br><span class="line">    time_ago_in_words(post.created_at)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  has_one <span class="symbol">:user</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>post_detail_serializer.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostDetailSerializer</span> &lt; <span class="title class_ inherited__">PostSerializer</span></span><br><span class="line">  attributes <span class="symbol">:content</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>posts_controller.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PostsController</span> &lt; <span class="title class_ inherited__">ApplicationController</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">index</span></span><br><span class="line">    render <span class="symbol">json:</span> &#123; <span class="symbol">posts:</span> <span class="title class_">PostSerializer</span>.render(<span class="title class_">Post</span>.all) &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">show</span></span><br><span class="line">    render <span class="symbol">json:</span> &#123; <span class="symbol">post:</span> <span class="title class_">PostDetailSerializer</span>.render(<span class="title class_">Post</span>.find(params[<span class="symbol">:id</span>])) &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>users_controller.rb</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UsersController</span> &lt; <span class="title class_ inherited__">ApplicationController</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">index</span></span><br><span class="line">    render <span class="symbol">json:</span> &#123; <span class="symbol">users:</span> <span class="title class_">UserSerializer</span>.render(<span class="title class_">User</span>.all) &#125;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>Similar to active_model_serializers, it uses class definitions to generate output, but it’s more intuitive to use. By calling the functions defined in the Serializer, you can directly generate JSON. In the controller, you can easily assemble the JSON, and pagination or other information can be added easily. As for the <code>nil</code> issue with a single record, if you want to output <code>nil</code>, you can achieve it using the <code>one_if</code> function:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">render <span class="symbol">json:</span> &#123; <span class="symbol">post:</span> <span class="title class_">PostDetailSerializer</span>.one_if(post) &#125;</span><br></pre></td></tr></table></figure><h2 id="Benchmark"><a href="#Benchmark" class="headerlink" title="Benchmark"></a>Benchmark</h2><p>Next, let’s test the performance. I created a <a target="_blank" rel="noopener" href="https://github.com/emn178/json-api-benchmark">benchmark project</a>, and the results are approximately as follows:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">             as_json      0.116 (± 0.0%) i/s     (8.62 s/i) -      1.000 in   8.623844s</span><br><span class="line">            jbuilder      0.103 (± 0.0%) i/s     (9.70 s/i) -      1.000 in   9.698932s</span><br><span class="line">active_model_serializers  0.057 (± 0.0%) i/s    (17.55 s/i) -      1.000 in  17.549307s</span><br><span class="line">       oj_serializer      0.155 (± 0.0%) i/s     (6.45 s/i) -      1.000 in   6.453107s</span><br><span class="line">oj_serializer.to_json     0.187 (± 0.0%) i/s     (5.36 s/i) -      1.000 in   5.358214s</span><br></pre></td></tr></table></figure><p>oj_serializer has the best performance, and I also happened to find that adding <code>to_json</code> further improves the performance. Using the example above, it would be modified like this:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">render <span class="symbol">json:</span> &#123; <span class="symbol">posts:</span> <span class="title class_">PostSerializer</span>.render(<span class="title class_">Post</span>.all) &#125;.to_json</span><br></pre></td></tr></table></figure><p>All the tests above have already included the optimization results from oj.</p><h2 id="Conclusions"><a href="#Conclusions" class="headerlink" title="Conclusions"></a>Conclusions</h2><p>We compare the requirements in a table:</p><table><thead><tr><th>Requirement</th><th align="center">as_json</th><th align="center">jbuilder</th><th align="center">active_model_serializers</th><th align="center">oj_serializer</th></tr></thead><tbody><tr><td>Ease of maintenance</td><td align="center">X</td><td align="center">O</td><td align="center">O</td><td align="center">O</td></tr><tr><td>Reusability</td><td align="center">X</td><td align="center">O</td><td align="center">O</td><td align="center">O</td></tr><tr><td>Generate JSON objects</td><td align="center">O</td><td align="center">△</td><td align="center">O</td><td align="center">O</td></tr><tr><td>Performance</td><td align="center">△</td><td align="center">△</td><td align="center">X</td><td align="center">O</td></tr><tr><td>Ease of testing</td><td align="center">O</td><td align="center">△</td><td align="center">O</td><td align="center">O</td></tr></tbody></table><p>oj_serializer is a great choice.</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://emn178.github.io/blog">小殘</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://emn178.github.io/blog/en/post/jbuilder-vs-active-model-serializers-vs-oj-serializers/">https://emn178.github.io/blog/en/post/jbuilder-vs-active-model-serializers-vs-oj-serializers/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/blog/images/logos/Ruby_On_Rails_Logo.svg" data-initialized="true"><a class="social-share-icon icon-facebook" href="#" aria-label="share to facebook"></a><a class="social-share-icon icon-twitter" href="#" aria-label="share to twitter"></a><a class="social-share-icon icon-wechat" href="#" aria-label="share to wechat"></a><a class="social-share-icon icon-weibo" href="#" aria-label="share to weibo"></a><a class="social-share-icon icon-qq" href="#" aria-label="share to qq"></a></div></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/blog/en/post/acts-as-taggable-on-vs-postgresql-array/" title="acts-as-taggable-on vs. PostgreSQL Array (acts-as-taggable-array-on)"><img class="cover" src="/blog/images/loading.svg" data-src="/blog/images/logos/Ruby_On_Rails_Logo.svg" onerror='onerror=null,src="/blog/img/404.jpg"' alt="cover of next post"><noscript><img class="cover" src="/blog/images/logos/Ruby_On_Rails_Logo.svg" onerror='onerror=null,src="/blog/img/404.jpg"' alt="cover of next post"></noscript><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">acts-as-taggable-on vs. PostgreSQL Array (acts-as-taggable-array-on)</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/blog/images/loading.svg" data-src="/blog/images/avatar.jpg" onerror='this.onerror=null,this.src="/blog/img/friend_404.gif"' alt="avatar"><noscript><img src="/blog/images/avatar.jpg" onerror='this.onerror=null,this.src="/blog/img/friend_404.gif"' alt="avatar"></noscript></div><div class="author-info__name">emn178</div><div class="author-info__description">A blog sharing experiences about programming and technology.</div></div><div class="card-info-data site-data is-center"><a href="/blog/en/archives/"><div class="headline">Articles</div><div class="length-num">3</div></a><a href="/blog/en/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/blog/en/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Scenario"><span class="toc-number">1.</span> <span class="toc-text">Scenario</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Implementation"><span class="toc-number">2.</span> <span class="toc-text">Implementation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#as-json"><span class="toc-number">2.1.</span> <span class="toc-text">as_json</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jbuilder"><span class="toc-number">2.2.</span> <span class="toc-text">jbuilder</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#active-model-serializers"><span class="toc-number">2.3.</span> <span class="toc-text">active_model_serializers</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#nil-requires-special-handling"><span class="toc-number">2.3.1.</span> <span class="toc-text">nil requires special handling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Default-single-root"><span class="toc-number">2.3.2.</span> <span class="toc-text">Default single root</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#oj-serializers"><span class="toc-number">2.4.</span> <span class="toc-text">oj_serializers</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Benchmark"><span class="toc-number">3.</span> <span class="toc-text">Benchmark</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusions"><span class="toc-number">4.</span> <span class="toc-text">Conclusions</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/blog/en/post/ancestry-vs-awesome-nested-set/" title="ancestry vs. awesome_nested_set"><img src="/blog/images/loading.svg" data-src="/blog/images/logos/Ruby_On_Rails_Logo.svg" onerror='this.onerror=null,this.src="/blog/img/404.jpg"' alt="ancestry vs. awesome_nested_set"><noscript><img src="/blog/images/logos/Ruby_On_Rails_Logo.svg" onerror='this.onerror=null,this.src="/blog/img/404.jpg"' alt="ancestry vs. awesome_nested_set"></noscript></a><div class="content"><a class="title" href="/blog/en/post/ancestry-vs-awesome-nested-set/" title="ancestry vs. awesome_nested_set">ancestry vs. awesome_nested_set</a><time datetime="2025-05-17T13:16:57.000Z" title="Created 2025-05-17 21:16:57">2025-05-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/en/post/acts-as-taggable-on-vs-postgresql-array/" title="acts-as-taggable-on vs. PostgreSQL Array (acts-as-taggable-array-on)"><img src="/blog/images/loading.svg" data-src="/blog/images/logos/Ruby_On_Rails_Logo.svg" onerror='this.onerror=null,this.src="/blog/img/404.jpg"' alt="acts-as-taggable-on vs. PostgreSQL Array (acts-as-taggable-array-on)"><noscript><img src="/blog/images/logos/Ruby_On_Rails_Logo.svg" onerror='this.onerror=null,this.src="/blog/img/404.jpg"' alt="acts-as-taggable-on vs. PostgreSQL Array (acts-as-taggable-array-on)"></noscript></a><div class="content"><a class="title" href="/blog/en/post/acts-as-taggable-on-vs-postgresql-array/" title="acts-as-taggable-on vs. PostgreSQL Array (acts-as-taggable-array-on)">acts-as-taggable-on vs. PostgreSQL Array (acts-as-taggable-array-on)</a><time datetime="2025-04-14T13:32:09.000Z" title="Created 2025-04-14 21:32:09">2025-04-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/en/post/jbuilder-vs-active-model-serializers-vs-oj-serializers/" title="jbuilder vs active_model_serializers vs oj_serializers - Rails JSON API Comparison"><img src="/blog/images/loading.svg" data-src="/blog/images/logos/Ruby_On_Rails_Logo.svg" onerror='this.onerror=null,this.src="/blog/img/404.jpg"' alt="jbuilder vs active_model_serializers vs oj_serializers - Rails JSON API Comparison"><noscript><img src="/blog/images/logos/Ruby_On_Rails_Logo.svg" onerror='this.onerror=null,this.src="/blog/img/404.jpg"' alt="jbuilder vs active_model_serializers vs oj_serializers - Rails JSON API Comparison"></noscript></a><div class="content"><a class="title" href="/blog/en/post/jbuilder-vs-active-model-serializers-vs-oj-serializers/" title="jbuilder vs active_model_serializers vs oj_serializers - Rails JSON API Comparison">jbuilder vs active_model_serializers vs oj_serializers - Rails JSON API Comparison</a><time datetime="2025-03-23T02:03:34.000Z" title="Created 2025-03-23 10:03:34">2025-03-23</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2010 - 2025 By emn178</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/blog/js/utils.js?v=4"></script><script src="/blog/js/main.js?v=14"></script><div class="js-pjax"><script>function loadDisqus(){var e,s,i=function(){this.page.url="https://emn178.github.io/blog/en/post/jbuilder-vs-active-model-serializers-vs-oj-serializers/",this.page.identifier="/blog/en/post/jbuilder-vs-active-model-serializers-vs-oj-serializers/",this.page.title="jbuilder vs active_model_serializers vs oj_serializers - Rails JSON API Comparison"};window.disqusReset=()=>{DISQUS.reset({reload:!0,config:i})},window.DISQUS?disqusReset():(e=document,(s=e.createElement("script")).src="https://emn178-blog.disqus.com/embed.js",s.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(s)),document.getElementById("darkmode").addEventListener("click",()=>{setTimeout(()=>window.disqusReset(),200)})}{function loadOtherComment(){loadDisqus()}btf.loadComment(document.getElementById("disqus_thread"),loadDisqus)}</script></div></div></body></html>